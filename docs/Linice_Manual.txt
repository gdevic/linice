

                                 USING LINICE

                         June 5, 2002 (c) Goran Devic

                             document version 1.0

------------------------------------------------------------------------------

This project is hosted at http://sourceforge.net/projects/linice

Please use that site to report:
 * Bugs in software or documentation
 * Requests for features
 * Discussion posts and replys

Also, if you'd like to contribute to the project in any other ways, that is the
central place to visit.

NOTE: As of this writing, sources are still not freely available. This is a
early test version of both code and documents.

------------------------------------------------------------------------------

INTRODUCTION

Linice is written and tested for Linux kernels 2.2.x and 2.4.x. There are three
components in the Linice package:

 * Linsym loader/translator
 * xice loader
 * Linice debugger

This document is written with the assumption that the reader is already
somewhat familiar with the (C) SoftIce debugger for windows.


COMPILING THE PACKAGE

Appropriately, in order to compile the package, you need to compile its
components individually. Besides the "usual" developer's environment containing
gcc and kernel includes, you will use an excellent assembler 'nasm'. If you
dont have it installed already, its binaries are enclosed in the package.

Please follow these steps:

A1) cd to linice directory
A2) type 'make clean' to clean the previous binaries and objects
A3) type 'make' to make the linice module
B1) cd to linsym directory
B2) type 'make clean' to clean the previous binaries and objects 
B3) type 'make' to make the linsym utility
C1) cd to xice directory
C2) type 'make clean' to clean the previous binaries and objects 
C3) type 'make' to make the xice utility

Build process will copy all binaries to the linice bin subdirectory.


LINSYM LOADER/TRANSLATOR

Linsym is a user-mode utility that is used to load, unload linice kernel level
module, translate debug information from the object and ELF files into the
proprietary symbol file (used by the Linice) and manage those symbol files.


XICE LOADER

Xice is a user-mode utility, compiled with some X-Windows libraries, that can
detect the current X Windows mode parameters and send them to the running
Linice debugger module, so the latter may pop up using the X Windows frame
buffer.


LINICE DEBUGGER

Linice debugger is a Linux kernel-level loadable module. Although it can be
loaded manually, a recommended way to load it is via Linsym utility since it
needs some extra parameters to be passed.


------------------------------------------------------------------------------

INSTALLING LINICE

Linice should run on 2.2 and 2.4 kernels. Normally you would use Linsym utility
to install, remove and pass on all communication to the Linice kernel module.

To install Linice, go into the linice bin subdirectory and type
    linsym -i

That command will look for the linice.o module and install it. Also, it will
pass on some map information to it, so the debugger module may be able to place
necessary hooks.

You can now break into the debugger by pressing Ctrl+Q key combination.

To remove Linice from memory, type
    linsym -x

Linsym will try to load a configuration text file with the name LINICE.DAT that
can contain additional options for linice debugger.


LINICE DISPLAY OPTIONS

Linice can be run to use the following displays for output:
1) Text mode VGA
2) Monochrome (Hercules) graphics card
3) Serial output to a VT100-compatible terminal
4) X Window (DGA) frame buffer

By default, Linice starts displaying using the text mode VGA screen. In order
to switch it to use monochrome card, use the command MDA.


USING LINICE UNDER X WINDOWS

Linice can use graphical frame buffer usually set up by an X Window server.
Only displaying to a local frame buffer is supported (i.e. no remote session).
To display Linice on a X Window screen, run the utility XICE that is part of
Linice package, with Linice already loaded. Xice will detect whether X Windows
is running and if it has direct framebuffer access capability (DGA). If so, it
will send required display parameters to a Linice module.

Next you will have to break in the debugger by pressing a hotkey and type XWIN
[Enter]. Note that during this step you will not be able to see Linice display
since it is still displaying onto the VGA text buffer. After you hit Enter,
XWIN command should make Linice pop up and make it visible.

