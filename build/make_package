#!/bin/bash

    rm  -rf linice
    rm  -f  linice-bin.tar
    rm  -f  linice-bin.tar.gz
    rm  -rf linice-package

    echo "+-----------------------------------------------------+"
    echo "|                      PACKAGING                      |"
    echo "+-----------------------------------------------------+"
    mkdir linice
	mkdir linice/ext

	cp  ../bin/iceface.c	linice
	cp  ../bin/Makefile		linice

	cp  ../ext/extension.c	linice/ext
	cp  ../ext/LiniceExt.h	linice/ext
	cp  ../ext/Makefile		linice/ext

    cp  ../bin/linsym           linice
    cp  ../bin/iceface.h        linice
    cp  ../bin/pcihdr.h         linice
    cp  ../bin/linice.dat       linice
    cp  ../bin/linice_kernel.o  linice
    cp  ../bin/xice             linice

    cp  ../docs/COPYING         linice
    cp  ../docs/Linice.pdf      linice
    cp  ../docs/README			linice
    cp  ../bin/Version.txt      linice

    chmod +644 -R linice
    chmod +666    linice/Makefile
    chmod +755    linice/linsym
    chmod +755    linice/xice
    chmod +666    linice/linice.dat
    chmod +755    linice

    cp -p -R linice linice-package

    tar -cvf linice-bin.tar linice
    gzip linice-bin.tar

	rm -rf linice